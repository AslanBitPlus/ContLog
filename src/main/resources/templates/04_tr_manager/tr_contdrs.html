<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:if="${reportType} == 'all'">Все Заявки</title>
    <title th:if="${reportType} == 'today'">Заявки на Сегодня</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">

    <script src="js/st_script.js" defer></script>

    <style>
        `/* Уменьшаем высоту строк и ячеек */
        table.table tr {
            height: 26px !important; /* Высота строки */
        }

        table.table th,
        table.table td {
            height: 24px !important; /* Высота ячеек */
            padding: 4px 10px !important; /* Уменьшаем отступы (2px сверху/снизу, 5px слева/справа) */
            box-sizing: border-box;
        }`
    </style>

</head>
<body>

<div class="container">
    <h2 th:if="${reportType} == 'all'">Все Заявки</h2>
    <h2 th:if="${reportType} == 'today'">Заявки на Сегодня</h2>
    <h5>
        <th:block th:text="${terminalShortName} != null ? 'Терминал: ' + ${terminalShortName} : 'Заявки по всем терминалам'"></th:block>
        <th:block th:text="${inOut} == 'out' ? ' - Выдача КТК' : ' - Прием КТК'"></th:block>
    </h5>
    <form class="form-inline mb-3">
        <input class="form-control mr-sm-2" type="text" id="searchInput" placeholder="Поиск Заявки" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="button">Поиск</button>
    </form>
<!--    <a href="/tc_contdrses/create">Новое Распределение</a> | <a href="/tc_contdrses_today">Распределения на сегодня</a> | <a href="/main">Главная страница</a>-->
    <a th:if="${inOut == 'in'}" href="/tr_contdrses_in">Заявки - Прием</a>
    <a th:if="${inOut == 'out'}" href="/tr_contdrses_out">Заявки - Выдача</a> |
    <a th:if="${inOut == 'in'}" href="/tr_contdrses_in/today">Заявки Прием на Сегодня</a>
    <a th:if="${inOut == 'out'}" href="/tr_contdrses_out/today">Заявки Выдача на Сегодня</a> |

    <a th:if="${reportType} == 'all' and ${inOut == 'in'}"
       href="/tr_contdrses_in/print"
       target="_blank">Печать</a>
    <a th:if="${reportType} == 'all' and ${inOut == 'out'}"
       href="/tr_contdrses_out/print"
       target="_blank">Печать</a>

    <a th:if="${reportType} == 'today' and ${inOut == 'in'}"
       href="/tr_contdrses_in/today/print"
       target="_blank">Печать</a>
    <a th:if="${reportType} == 'today' and ${inOut == 'out'}"
       href="/tr_contdrses_out/today/print"
       target="_blank">Печать</a> |

    <a href="/main">Главная страница</a>


    <table class="table table-striped table-bordered" id="usersTable">
<!--            <table class="compact-table">-->
        <thead>
        <tr>
            <th>Id</th>
            <th>
                <span>Дата</span><br>
                <span>Время</span>
            </th>

            <th>
                <span>Терминал</span><br>
                <span>Сток</span><br>
                <span th:if="${inOut == 'out'}">Выдача</span>
                <span th:if="${inOut == 'in'}">Прием</span>
            </th>
<!--            <th>Релиз</th>-->
<!--            <th>Адрес пог/выг</th>-->
<!--            <th>Сток</th>-->
            <th th:if="${inOut == 'out'}">
                <span>КТК с...</span><br>
                <span>КТК по...</span><br>
                <span>Релиз</span>
            </th>

            <th>Водитель</th>

            <th>КТК</th>

<!--            <th>Прием/Выдача</th>-->
            <th>Груж/Пор</th>
            <th>Перемещ/Старт/Финиш</th>

<!--            <th>-->
<!--                <span>Терминал</span>-->
<!--                <span>Сток</span>-->
<!--                <span>Сдача</span>-->
<!--            </th>-->

            <th th:text="${inOut} == 'out' ? 'Выдача' : 'Прием'"></th>
            <th>Акт</th>

            <th>Правка</th>
        </tr>

        </thead>
        <tbody>
        <tr th:each = "contdrs : ${contdrses}">
            <td th:text = "${contdrs.id}"></td>
<!--            <td th:text = "${contdrs.sale.id} + ' от ' + ${#temporals.format(contdrs.sale.fromDate, 'dd.MM.yyyy')}"></td>-->
            <!--Дата с, Дата по. Для получения КТК-->
            <td>
                <span th:text="${#temporals.format(contdrs.sale.fromDate, 'dd.MM.yyyy')}"></span>
                <br>
                <span th:text="${#temporals.format(contdrs.sale.fromTime, 'HH:mm')}"></span>
            </td>

            <!--Терминал, Сток, Выдача -->
            <td th:if="${inOut == 'out'}">
                <span th:text="${contdrs.fromTerminal != null} ? ${contdrs.fromTerminal.shortName} : 'Нет'"></span>
                <br>
                <span th:text="${contdrs.sale.contowner != null} ? ${contdrs.sale.contowner.name} : 'Нет'"></span>
                <br>
                <span>---</span>
            </td>
            <!--Терминал, Сток, Прием -->
            <td th:if="${inOut == 'in'}">
                <span th:text="${contdrs.toTerminal != null} ? ${contdrs.toTerminal.shortName} : 'Нет'"></span>
                <br>
                <span th:text="${contdrs.sale.contowner != null} ? ${contdrs.sale.contowner.name} : 'Нет'"></span>
                <br>
                <span>---</span>
            </td>

<!--            <td th:text="${contdrs.sale.fromAddress}"></td>-->
            <!--Получение КТК с..., по..., Релиз -->
            <td th:if="${inOut == 'out'}">
                <span th:text="${#temporals.format(contdrs.dateFrom, 'dd.MM.yyyy')}"></span>
                <br>
                <span th:text="${#temporals.format(contdrs.dateTo, 'dd.MM.yyyy')}"></span>
                <br>
                <span th:text="${contdrs.relis != null} ? ${contdrs.relis} : 'Нет'"></span>
            </td>

            <td th:text = "${contdrs.driver != null} ? ${contdrs.driver.surename} + ' ' + ${contdrs.driver.name} : 'Нет'"></td>

            <td th:text = "${contdrs.sale.container != null} ? ${contdrs.sale.container.code} + ' ' + ${contdrs.sale.container.number} : 'Нет'"></td>

<!--            <td th:text = "${contdrs.io}"></td>-->

<!--            <td th:switch="${contdrs.io}">-->
<!--                <p th:case="0">Перем</p>-->
<!--                <p th:case="-1">Прием</p>-->
<!--                <p th:case="1">Выдача</p>-->
<!--            </td>-->

            <td th:text="${contdrs.w == -1} ? 'Порож' : 'Груж'"></td>

<!--            <td th:text = "${contdrs.typeDrs}"></td>-->
            <td th:switch="${contdrs.typeDrs}">
                <p th:case="0">Перем</p>
                <p th:case="-1">Финиш</p>
                <p th:case="1">Старт</p>
            </td>

<!--            <td>-->
<!--                <span th:text = "${contdrs.toTerminal != null} ? ${contdrs.toTerminal.shortName} : 'Нет'"></span>-->
<!--                <br>-->
<!--                <span>-&#45;&#45;</span>-->
<!--                <br>-->
<!--                <span>-&#45;&#45;</span>-->
<!--            </td>-->
            <td th:if="${inOut == 'out'}">
                <span th:if="${contdrs.started}" class="badge bg-success">Выдан</span>
                <span th:unless="${contdrs.started}" class="badge bg-warning text-dark">НЕ Выдан</span>
            </td>
            <td th:if="${inOut == 'in'}">
                <span th:if="${contdrs.finished}" class="badge bg-success">Принят</span>
                <span th:unless="${contdrs.finished}" class="badge bg-warning text-dark">НЕ Принят</span>
            </td>
<!--            =======================================================-->
            <td><a href="/tr_contdrses/print">Печать</a></td>


<!--            <td>-->
<!--                <span th:if="${contdrs.started}" class="badge bg-success">Выполняется</span>-->
<!--                <span th:unless="${contdrs.started}" class="badge bg-warning text-dark">НЕ Начат</span>-->
<!--            </td>-->

<!--            <td>-->
<!--                <span th:if="${contdrs.finished}" class="badge bg-success">Заверщен</span>-->
<!--                <span th:unless="${contdrs.finished}" class="badge bg-warning text-dark">НЕ Заверщен</span>-->
<!--            </td>-->
<!--            =======================================================-->

            <td th:if="${inOut == 'in'}">
                <a href="/tr_contdrses_in" th:href="@{/tr_contdrses_in/update/__${contdrs.id}__}">Прием</a>
            </td>
            <td th:if="${inOut == 'out'}">
                <a href="/tr_contdrses_out" th:href="@{/tr_contdrses_out/update/__${contdrs.id}__}">Выдача</a>
            </td>

<!--            <td><a href="/tr_contdrses" th:href="@{/tr_contdrses/update/__${contdrs.id}__}">Обновить</a></td>-->
<!--            <td><a href="/tc_contdrses" th:href="@{/tc_contdrses/delete/__${contdrs.id}__}"-->
<!--                   onclick="return confirm('Вы уверены, что хотите удалить эту Заявку DRS?');">-->
<!--                Удалить-->
<!--            </a>-->
<!--            </td>-->
        </tr>
        </tbody>
    </table>

</div>

</body>
</html>
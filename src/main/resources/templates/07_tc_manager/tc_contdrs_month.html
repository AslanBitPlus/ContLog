<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Заявки DRS</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">

    <script src="js/st_script.js" defer></script>

    <style>
        /* Уменьшаем высоту строк и ячеек */
        table.table tr {
            height: 26px !important; /* Высота строки */
        }

        table.table th,
        table.table td {
            height: 24px !important; /* Высота ячеек */
            padding: 4px 10px !important; /* Уменьшаем отступы (2px сверху/снизу, 5px слева/справа) */
            box-sizing: border-box;
        }
    </style>

</head>
<body>

<div class="container">
    <h2>Заявки DRS</h2>
    <h5>
        <th:block th:text="${carrierName} != null ? 'Перевозчик :' + ${carrierName} : 'Водители Всех Перевозчиков'"></th:block>
    </h5>
    <form class="form-inline mb-3">
        <input class="form-control mr-sm-2" type="text" id="searchInput" placeholder="Поиск Заявки" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="button">Поиск</button>
    </form>
<!--    <a href="/tc_contdrses/create">Новое Распределение</a> | <a href="/tc_contdrses_today">Распределения на сегодня</a> | <a href="/main">Главная страница</a>-->
    <a href="/tc_contdrses">Заявки Все</a> | <a href="/tc_contdrses/week">Заявки на Сегодня</a> | <a href="/tc_contdrses/month">Заявки за Месяц</a> | <a href="/main">Главная страница</a>

    <table class="table table-striped table-bordered" id="usersTable">
        <!--    <table class="table">-->
        <thead>
        <tr>
            <th>Id</th>
            <th>Дата Время</th>
<!--            <th>Время</th>-->

            <th>Терминал Релиз Сток</th>
<!--            <th>Релиз</th>-->
            <th>Адрес п/в</th>
<!--            <th>Сток</th>-->
            <th>Получ КТК (с. по. )</th>

            <th>Водитель</th>

            <th>КТК</th>

            <th>Прием/Выдача</th>
            <th>Груж/Пор</th>
            <th>Перемещ/Старт/Финиш</th>

            <th>Терминал в...</th>

            <th>Старт</th>
            <th>Финиш</th>

            <th>Правка</th>
        </tr>

        </thead>
        <tbody>
        <tr th:each = "contdrs : ${contdrses}">
            <td th:text = "${contdrs.id}"></td>
<!--            <td th:text = "${contdrs.sale.id} + ' от ' + ${#temporals.format(contdrs.sale.fromDate, 'dd.MM.yyyy')}"></td>-->
            <!--Дата с, Дата по. Для получения КТК-->
            <td>
                <span th:text="${#temporals.format(contdrs.sale.fromDate, 'dd.MM.yyyy')}"></span>
                <br>
                <span th:text="${#temporals.format(contdrs.sale.fromTime, 'HH:mm')}"></span>
            </td>

            <!--Терминал, Релиз, Сток-->
            <td>
                <span th:text="${contdrs.fromTerminal != null} ? ${contdrs.fromTerminal.shotName} : 'Нет'"></span>
                <br>
                <span th:text="${contdrs.relis != null} ? ${contdrs.relis} : 'Нет'"></span>
                <br>
                <span th:text="${contdrs.sale.contowner != null} ? ${contdrs.sale.contowner.name} : 'Нет'"></span>
            </td>

            <td th:text="${contdrs.sale.fromAddress}"></td>

            <td>
                <span th:text="${#temporals.format(contdrs.dateFrom, 'dd.MM.yyyy')}"></span>
                <br>
                <span th:text="${#temporals.format(contdrs.dateTo, 'dd.MM.yyyy')}"></span>
            </td>

            <td th:text = "${contdrs.driver != null} ? ${contdrs.driver.sureName} + ' ' + ${contdrs.driver.name} : 'Нет'"></td>

            <td th:text = "${contdrs.sale.container != null} ? ${contdrs.sale.container.code} + ' ' + ${contdrs.sale.container.number} : 'Нет'"></td>

<!--            <td th:text = "${contdrs.io}"></td>-->
            <td th:switch="${contdrs.io}">
                <p th:case="0">Перем</p>
                <p th:case="-1">Прием</p>
                <p th:case="1">Выдача</p>
            </td>

            <td th:text="${contdrs.w == -1} ? 'Порож' : 'Груж'"></td>

<!--            <td th:text = "${contdrs.typeDrs}"></td>-->
            <td th:switch="${contdrs.typeDrs}">
                <p th:case="0">Перем</p>
                <p th:case="-1">Финиш</p>
                <p th:case="1">Старт</p>
            </td>

            <td th:text = "${contdrs.toTerminal != null} ? ${contdrs.toTerminal.shotName} : 'Нет'"></td>
<!--            =======================================================-->
            <td>
                <span th:if="${contdrs.started}" class="badge bg-success">Выполняется</span>
                <span th:unless="${contdrs.started}" class="badge bg-warning text-dark">НЕ Начат</span>
            </td>

            <td>
                <span th:if="${contdrs.finished}" class="badge bg-success">Заверщен</span>
                <span th:unless="${contdrs.finished}" class="badge bg-warning text-dark">НЕ Заверщен</span>
            </td>
<!--            =======================================================-->

            <td><a href="/tc_contdrses" th:href="@{/tc_contdrses/update/__${contdrs.id}__}">Обновить</a></td>
<!--            <td><a href="/tc_contdrses" th:href="@{/tc_contdrses/delete/__${contdrs.id}__}"-->
<!--                   onclick="return confirm('Вы уверены, что хотите удалить эту Заявку DRS?');">-->
<!--                Удалить-->
<!--            </a>-->
<!--            </td>-->
        </tr>
        </tbody>
    </table>

</div>

</body>
</html>
<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>
        <th:block th:if="${!isUpdate}">Новое Распределение</th:block>
        <th:block th:if="${isUpdate}">Обновление Распределения</th:block>
    </title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/main.css">

    <style>
        /* Уменьшаем высоту строк и ячеек */
        table.table tr {
            height: 26px !important; /* Высота строки */
        }

        table.table th,
        table.table td {
            height: 24px !important; /* Высота ячеек */
            padding: 4px 10px !important; /* Уменьшаем отступы (2px сверху/снизу, 5px слева/справа) */
            box-sizing: border-box;
        }

        /* Уменьшаем ширину левой колонки */
        table.table th {
            width: 180px; /* Фиксированная ширина для левой колонки */
            white-space: nowrap; /* Запрещаем перенос текста */
        }

        /* Уменьшаем высоту и ширину input */
        table.table input {
            height: 22px !important; /* Высота input */
            width: 120% !important; /* Ширина input (90% от доступной ширины) */
            padding: 0 5px !important; /* Уменьшаем padding */
            margin: 0 !important; /* Убираем margin */
            font-size: 14px !important; /* Уменьшаем размер шрифта */
            line-height: 1 !important; /* Убираем лишний межстрочный интервал */
            box-sizing: border-box;
        }

        /* Уменьшаем высоту div внутри td */
        table.table td div {
            height: 20px !important; /* Высота div */
            line-height: 20px !important; /* Центрируем текст по вертикали */
            font-size: 14px !important; /* Уменьшаем размер шрифта */
            box-sizing: border-box;
        }

        /* Убираем лишние отступы у таблицы */
        table.table {
            margin-bottom: 10px !important;
            width: auto; /* Автоматическая ширина таблицы */
        }
    </style>
</head>

<body>

<div class="container">
    <h2>
        <th:block th:if="${!isUpdate}">Новое Распределение</th:block>
        <th:block th:if="${isUpdate}">Обновление Распределения</th:block>
    </h2>
    <td>
        <form th:action="${isUpdate} ? '/so_contdrses/update/' + ${contdrs.id} : '/so_contdrses/create'" th:object="${contdrs}" method="post">
            <table class="table">
                <thead>
                <tr>
                    <th>Поле</th>
                    <th>Значение</th>
                </tr>
                </thead>
                <tbody>

                <tr th:if="${!isUpdate}">
                    <th>Выбор Заявки</th>
                    <td>
                        <select name="sale">
                            <option th:value="${sll}">Заявки для выбора</option>
                            <option th:each="sale : ${sales}"
                                    th:value="${sale.id}"
                                    th:text="${sale.id} + ' ' + ${sale.fromDate}"></option>
                        </select>
                        <small class="form-text text-muted">Заявки для выбора</small>
                    </td>
                </tr>


                <tr th:if="${isUpdate}">
                    <th>Заявка №</th>
                    <td><div th:text="${contdrs.sale.id} + ' от ' + ${contdrs.sale.fromDate}"></div></td>
                </tr>
                <tr th:if="${isUpdate}">
                    <th>Номер DRS</th>
                    <td><div th:text="${contdrs.id}"></div></td>
                </tr>
                <tr th:if="${isUpdate}">
                    <th>Дата рег-ции</th>
                    <td><div th:text="${#temporals.format(contdrs.dateReg, 'dd.MM.yyyy HH:mm')}" step="60"></div></td>
                </tr>
                <tr th:if="${!isUpdate}">
                    <th>Дата рег-ции</th>
                    <td><input type="datetime" id="dateReg" name="dateReg"
                               th:value="${dateReg}">
                        <small class="form-text text-muted">Формат: дд.мм.гггг чч:мм</small>
                    </td>
                </tr>

<!--                <tr th:if="${!isUpdate}">-->
<!--                    <th>Выбор Стока КТК</th>-->
<!--                    <td>-->
<!--                        <select name="contowner">-->
<!--                            <option th:value="${owner}">Стоки для выбора</option>-->
<!--                            <option th:each="contowner : ${contowners}"-->
<!--                                    th:value="${contowner.id}"-->
<!--                                    th:text="${contowner.name}"></option>-->
<!--                        </select>-->
<!--                        <small class="form-text text-muted">Сток для выбора</small>-->
<!--                    </td>-->
<!--                </tr>-->
                <tr th:if="${isUpdate}">
                    <th>Сток КТК</th>
                    <td><div th:text="${contdrs.sale.contowner.name}"></div></td>
                </tr>

<!--                Выбор Транспортной компании (Carrier)-->
                <tr>
                    <th>Тр/компания</th>
                    <td>
                        <select name="carrier" id="carrier" th:field="*{carrier}">
                            <option th:value=null
                                    th:selected="${contdrs.carrier == null}">Не выбран</option>
                            <option
                                    th:each="carrier : ${carriers}"
                                    th:value="${carrier.id}"
                                    th:text="${carrier.name}"
                                    th:selected="${contdrs.carrier?.id == carrier.id}">
                            </option>
                        </select>
                        <small class="form-text text-muted">(Сток для выд/при КТК)</small>
                    </td>
                </tr>

                <tr>
                    <th>Дата с ...</th>
                    <td><input type="date" id="dateFrom" name="dateFrom" th:value="${dateFrom}">
                        <small class="form-text text-muted">Формат: дд.мм.гггг</small>
                    </td>
                </tr>

                <tr>
                    <th>Дата по ...</th>
                    <td><input type="date" id="dateTo" name="dateTo" th:value="${dateTo}">
                        <small class="form-text text-muted">Формат: дд.мм.гггг</small>
                    </td>
                </tr>

                <tr>
                    <th>Перевозка</th>
<!--                    =========================================-->
                    <td>
                        <select type="number" id="io" name="io" th:field="*{io}">
                            <option value="0">Перемещение</option>
                            <option value="1">Погрузка</option>
                            <option value="-1">Выгрузка</option>
                        </select>
<!--                        <small class="form-text text-muted">(0-Перем, 1-Прием, -1-Выдача)</small>-->
                        <small class="form-text text-muted">(Перемещение, Погрузка, Выгрузка)</small>
                    </td>
<!--                    =========================================-->
                </tr>

                <tr>
                    <th>Груж/Пор</th>
<!--                    =========================================-->
                    <td>
                        <select type="number" id="w" name="w" th:field="*{w}">
                            <option value="1">Груженый</option>
                            <option value="-1">Порожний</option>
                        </select>
<!--                        <small class="form-text text-muted">(1-Груж, -1-Пор)</small>-->
                        <small class="form-text text-muted">(Груженый, Порожний)</small>
                    </td>
                </tr>

<!--                <tr>-->
<!--                    <th>Вес КТК (Тары)</th>-->
<!--                    <td><input type="number" id="weightT" name="weightT" th:value="${weightT ?: 3700}">-->
<!--                        <small class="form-text text-muted">Вес Тары</small>-->
<!--                    </td>-->
<!--                </tr>-->
<!--                <tr>-->
<!--                    <th>Вес КТК (Нетто)</th>-->
<!--                    <td><input type="number" id="weightN" name="weightN" th:value="${weightN ?: 0}">-->
<!--                        <small class="form-text text-muted">Вес КТК (Нетто)</small>-->
<!--                    </td>-->
<!--                </tr>-->
<!--                <tr>-->
<!--                    <th>Вес КТК (Брутто)</th>-->
<!--                    <td><input type="number" id="weightB" name="weightB" th:value="${weightB ?: 3700}">-->
<!--                        <small class="form-text text-muted">Вес КТК (Брутто)</small>-->
<!--                    </td>-->
<!--                </tr>-->

                <tr>
                    <th>В работе/Старт/Финиш</th>
<!--                    =========================================-->
                    <td>
                        <select type="number" id="typeDrs" name="typeDrs" th:field="*{typeDrs}">
                            <option value="0">В работе</option>
                            <option value="1">Старт</option>
                            <option value="-1">Финиш</option>
                        </select>
<!--                        <small class="form-text text-muted">(0-Перемещ, 1-Старт, -1-Финиш)</small>-->
                        <small class="form-text text-muted">(В работе, Старт, Финиш)</small>
                    </td>
                </tr>

                <tr>
                    <th>Состояние КТК</th>
<!--                    =========================================-->
                    <td>
                        <select type="text" id="drs" name="drs" th:field="*{drs}"
                                maxlength="1" pattern="[drst]">
                            <option value="d">Авто</option>
                            <option value="r">Ж/Д</option>
                            <option value="s">Корабль</option>
                            <option value="t">Терминал</option>
                        </select>
<!--                        <small class="form-text text-muted">(d-Авто, r-РЖД, s-Кробль, t-Терминал)</small>-->
                        <small class="form-text text-muted">(Авто, Ж/Д, Кробль, Терминал)</small>
                    </td>
                </tr>

<!--                <tr>-->
<!--                    <div class="form-group mb-2">-->
<!--                        <label>Выбор КТК:</label>-->
<!--                        <select name="container">-->
<!--                            &lt;!&ndash; Предусмотреть carr = "" при вводе нового Авто&ndash;&gt;-->
<!--                            <option th:value="${contrCN}">КТК для выбора</option>-->

<!--                            <option th:each="container : ${containers}"-->
<!--                                    th:value="${container.id}"-->
<!--                                    th:text="${container.code} + ' ' + ${container.number}"></option>-->
<!--                        </select>-->
<!--                    </div>-->
<!--                </tr>-->

<!--                <tr>-->
<!--                    <div class="form-group mb-2">-->
<!--                        <label>Выбор Терминала из...:</label>-->
<!--                        <select name="fromTerminal">-->
<!--                            &lt;!&ndash; Предусмотреть carr = "" при вводе нового Авто&ndash;&gt;-->
<!--                            <option th:value="${fromTerm}">КТК для выбора</option>-->

<!--                            <option th:each="terminal : ${terminals}"-->
<!--                                    th:value="${terminal.id}"-->
<!--                                    th:text="${terminal.shortName}"></option>-->
<!--                        </select>-->
<!--                    </div>-->
<!--                </tr>-->

<!--                <tr>-->
<!--                <div class="form-group mb-2">-->
<!--                    <label>Выбор Терминала в...:</label>-->
<!--                    <select name="toTerminal">-->
<!--                        &lt;!&ndash; Предусмотреть carr = "" при вводе нового Авто&ndash;&gt;-->
<!--                        <option th:value="${toTerm}">КТК для выбора</option>-->

<!--                        <option th:each="terminal : ${terminals}"-->
<!--                                th:value="${terminal.id}"-->
<!--                                th:text="${terminal.shortName}"></option>-->
<!--                    </select>-->
<!--                </div>-->
<!--                </tr>-->




<!--                <tr>-->
<!--                    <th>Менеджер</th>-->
<!--                    <td><input type="text" th:field="*{manager}" /></td>-->
<!--                </tr>-->

<!--                <div th:if="${isUpdate}" class="mb-3 form-check">-->
<!--                    <input type="checkbox" class="form-check-input" id="started" th:field="*{started}">-->
<!--                    <label class="form-check-label" for="started">Выполняется</label>-->
<!--                </div>-->

<!--                <div th:if="${isUpdate}" class="mb-3 form-check">-->
<!--                    <input type="checkbox" class="form-check-input" id="finished" th:field="*{finished}">-->
<!--                    <label class="form-check-label" for="finished">Заверщен</label>-->
<!--                </div>-->

                </tbody>
            </table>
            <button type="submit" class="btn btn-primary">Сохранить</button>
            || <a href="/so_contdrses" class="btn btn-secondary">Отмена</a>
        </form>
    </div>
</div>
</body>
</html>